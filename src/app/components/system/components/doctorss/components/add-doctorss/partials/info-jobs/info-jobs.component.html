<div [formGroup]="form">
  <div class="row">
    <!-- <div class="row filter-border"> -->
      <h5 *ngIf="doctorDataOfAdd || doctorPeriod">اسم الطبيب :{{doctorDataOfAdd?.name ? doctorDataOfAdd?.name : doctorPeriod?.doctorName}}</h5>
      <div class="col-md-6 col-xxl-6 filter-border">
        <div class="form-group mb-3">
          <label for="example-search-input" class="text-base-color text-bold">الفرع<span class="text-danger">*</span></label>
          <ng-select class="d-block pr-3 my-2" [multiple]="false" [items]="hospitals" formControlName="HospitalId"
              bindValue="hospitalId" bindLabel="name" appDebounceInputChange (change)="getClinics($event)">
          </ng-select>
          <mat-error>
            <div *ngIf="form.get('HospitalId').hasError('required')&& form.get('HospitalId').touched">
              من فضلك اختر الفرع
            </div>
          </mat-error>
        </div>
      </div>
      <div class="col-md-6 col-xxl-6 filter-border">
        <div class="form-group mb-3">
          <label for="example-search-input" class="text-base-color text-bold"> التخصص<span class="text-danger">*</span></label>
          <ng-select class="d-block pr-3 my-2" [multiple]="false" [items]="speciality" formControlName="SpecialtyId"
              bindValue="id" bindLabel="name" appDebounceInputChange >
          </ng-select>
          <mat-error>
            <div *ngIf="form.get('SpecialtyId').hasError('required')&& form.get('SpecialtyId').touched">
              من فضلك اختر التخصص
            </div>
          </mat-error>
        </div>
    </div>
      <div class="col-md-6 col-xxl-6 filter-border">
        <div class="form-group mb-3">
          <label for="example-search-input" class="text-base-color text-bold">العيادة<span class="text-danger">*</span></label>
          <ng-select class="d-block pr-3 my-2" [multiple]="false" [items]="clinics" formControlName="ClinicId"
              bindValue="clinicId" bindLabel="name" appDebounceInputChange >
          </ng-select>
          <mat-error>
            <div *ngIf="form.get('ClinicId').hasError('required')&& form.get('ClinicId').touched">
              من فضلك اختر العيادة
            </div>
          </mat-error>
        </div>
      </div>

    <div class="col-md-6 col-xxl-6 filter-border">
      <div class="form-group mb-3">
        <label for="example-search-input" class="text-base-color text-bold">اليوم<span class="text-danger">*</span></label>
        <ng-select class="d-block pr-3 my-2" [multiple]="false" [items]="workWeek" formControlName="onDay"
            bindValue="dayNumber" bindLabel="weekdayName" appDebounceInputChange >
        </ng-select>
        <mat-error>
          <div *ngIf="form.get('onDay').hasError('required')&& form.get('onDay').touched">
            من فضلك اختر اليوم
          </div>
        </mat-error>
      </div>
    </div>
    <div class="col-md-6 col-xxl-6 filter-border">
      <div class="form-group mb-3">
        <label for="example-search-input" class="text-base-color text-bold">فترة العمل<span class="text-danger">*</span></label>
        <ng-select class="d-block pr-3 my-2" [multiple]="false" [items]="workingPeriods" formControlName="WorkingPeriodId"
            bindValue="workingPeriodId" bindLabel="name" appDebounceInputChange >
        </ng-select>
        <mat-error>
          <div *ngIf="form.get('WorkingPeriodId').hasError('required')&& form.get('WorkingPeriodId').touched">
            من فضلك اختر الفترة
          </div>
        </mat-error>
      </div>
    </div>
      <div class="d-flex justify-content-center mt-4">
        <button type="button" class="btn btn-primary background-primary col-3"  [class.spinnerBtn]="loading" [disabled]="loading || !form.valid"  (click)="save()">
            <span>{{edit ? 'تعديل' : 'اضافة'}}</span>
        </button>
        <button type="button" class="btn btn-outline-primary col-3 me-2" (click)="cancel()">
          <span>الغاء</span>
        </button>
      </div>
  </div>

</div>
<div class="table-data my-3">
  <table mat-table [dataSource]="dataSource" matSort>

    <!-- ID Column -->
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> الرقم </th>
      <td mat-cell *matCellDef="let row"> {{row.id}} </td>
    </ng-container>

    <!-- Progress Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> اسم الطبيب </th>
      <td mat-cell *matCellDef="let row"> {{row?.doctor}} </td>
    </ng-container>
    <ng-container matColumnDef="hospital">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>  الفرع </th>
      <td mat-cell *matCellDef="let row"> {{row?.hospital}} </td>
    </ng-container>
    <ng-container matColumnDef="clinic">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>   العيادة </th>
      <td mat-cell *matCellDef="let row"> {{row?.clinic}} </td>
    </ng-container>
    <ng-container matColumnDef="day">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> اليوم </th>
      <td mat-cell *matCellDef="let row"> {{row?.dayName}} </td>

    </ng-container>
    <ng-container matColumnDef="period">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> الفترة </th>
      <td mat-cell *matCellDef="let row"> {{row?.workingPeriod}} </td>

    </ng-container>
    <ng-container matColumnDef = 'action'>
      <th mat-header-cell *matHeaderCellDef mat-sort-header> خيارات </th>
      <!-- Action Menu Items -->
      <td mat-cell *matCellDef="let row" (click)="$event.stopPropagation()">

      <button mat-icon-button [matMenuTriggerFor]="mainMenu">
        <i class="fa-solid fa-ellipsis-vertical"></i>
      </button>
      <mat-menu #mainMenu="matMenu">
        <button mat-menu-item (click)="rowAction('delete',row.id,row.doctorId)">
          <i class="fa-solid fa-trash"></i> حذف
        </button>
        <button mat-menu-item (click)="rowAction('edit',row.id,row.doctorId)">
          <i class="fa-solid fa-edit"></i> تعديل
        </button>
      </mat-menu>
    </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row (click)="onClickPublisher(row.id)" *matRowDef="let row; columns: displayedColumns;"></tr>

  </table>
<!--
  <mat-paginator [length]="totalItems" [pageSize]="pageSize" [pageIndex]="pageIndex"
    [pageSizeOptions]="[5, 10, 25, 100]"  (page)="pageChanged($event)">
</mat-paginator> -->
</div>
